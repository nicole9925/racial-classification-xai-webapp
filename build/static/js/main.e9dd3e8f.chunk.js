(this["webpackJsonpcapstone-app"]=this["webpackJsonpcapstone-app"]||[]).push([[0],{68:function(e,t,a){},69:function(e,t,a){},80:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(1),n=a.n(r),c=a(10),i=a.n(c),o=a(3),l=(a(68),a(69),function(e){var t={getUpload:"Background",Uploading:"\u2192",Uploaded:"Prediction",Input:"\u2192",Analysis:"Analysis"},a=e.progress,r={color:"#ffffff"},n={color:"#40406B"};return Object(s.jsxs)("div",{className:"header-container",children:[Object(s.jsx)("div",{className:"title-container",children:Object(s.jsx)("h3",{className:"title-text",children:"Facial Analysis + Bias Visualization"})}),Object(s.jsx)("div",{className:"nav-container",children:Object.keys(t).map((function(e){return Object(s.jsx)("h3",{className:"title-labels",style:a===e?r:n,children:t[e]})}))})]})}),d=a(25),u=a(2),j=a.n(u),b=a(5),p=a(26),h=a.n(p),g=a(15),x=a(16),O=new(function(){function e(){Object(g.a)(this,e)}return Object(x.a)(e,[{key:"UploadToServer",value:function(){var e=Object(b.a)(j.a.mark((function e(t,a){var s,r,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new FormData,r=t[0].split(";"),s.append("file",r[2].split(",")[1]),s.append("filename",a),e.next=6,fetch("/api/upload/",{method:"POST",body:s});case 6:return n=e.sent,e.next=9,n.json();case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),m=a(27),f=a.n(m),v=a(19);a(80);function y(){var e=Object(d.a)(["\n        display: block;\n        margin-left: 0px;\n        "]);return y=function(){return e},e}var N=function(e){return Object(s.jsx)("form",{children:Object(s.jsx)(h.a,{withIcon:!1,singleImage:!0,label:"Please upload an image with a single face.",buttonText:"Choose file",onChange:e.onImage,imgExtension:[".jpg",".png",".jpeg"],withPreview:!0,labelStyles:{color:"#ffffff"},fileContainerStyle:{backgroundColor:"var(--primary)",padding:"20px"},buttonStyles:{backgroundColor:"var(--highlight)"}},"image-uploader")})},w=function(e){var t=Object(r.useState)(void 0),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),l=Object(o.a)(i,2),d=l[0],u=l[1],p=Object(r.useState)(null),h=Object(o.a)(p,2),g=h[0],x=h[1],m=Object(r.useState)(!0),w=Object(o.a)(m,2),S=w[0],F=w[1],D=function(){var e=Object(b.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{F(!1),x(a)}catch(t){u(t.message)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var t=Object(b.a)(j.a.mark((function t(){var a,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setProgress("Uploading"),a=g[0].split(";"),s=a[1].split("=")[1],t.next=5,O.UploadToServer(g,s);case 5:r=t.sent,c("data:image/jpeg;base64,"+r.pp_img),e.setProgress("Uploaded"),e.setData({race:r.race,gender:r.gender,age:r.age}),e.setPlotData1({title:"Race Prediction",data:r.race_results,colors:["#9900ff","#00ccff"]}),e.setPlotData2({title:"Age Prediction",data:r.age_results,colors:["#ff4aa7","#e04646"]});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.jsx)("div",{children:function(e){switch(e.progress){case"getUpload":return fetch("/api/clear/"),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"upload-container",children:[Object(s.jsx)(N,{onImage:D,url:n}),Object(s.jsx)("button",{className:"submit",onClick:k,disabled:S,children:"Submit"})]})});case"Uploading":return function(){var e=Object(v.css)(y());return Object(s.jsx)(f.a,{color:"#80D8FF",loading:!0,size:150,css:e})}();case"Uploaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"image-container",children:Object(s.jsx)("img",{className:"pp-img",src:n,alt:"Your Face"})})});case"uploadError":return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"error-message",children:d}),Object(s.jsxs)("div",{className:"upload-container",children:[Object(s.jsx)(N,{onImage:D,url:n}),Object(s.jsx)("button",{className:"submit",onClick:k,disabled:S,children:"Submit"})]})]});default:return Object(s.jsx)(s.Fragment,{})}}(e)})},S=(a(85),function(e){var t=e.progress;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:function(){switch(t){case"getUpload":default:return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"upload-container",children:Object(s.jsx)(w,{setProgress:e.setProgress,setData:e.setData,setPlotData1:e.setPlotData1,setPlotData2:e.setPlotData2,progress:t})})})}}()})})}),F=(a(86),function(e){var t=e.progress,a=e.data;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:function(){switch(t){case"getUpload":case"Uploading":return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"background-container",children:[Object(s.jsx)("h3",{children:a.background[1].header}),Object(s.jsx)("p",{children:a.background[1].body}),Object(s.jsx)("h3",{children:a.background[2].header}),Object(s.jsx)("p",{children:a.background[2].body})]})});case"Uploaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"results-container",children:[Object(s.jsx)("h3",{children:Object(s.jsx)("strong",{children:"OUR GUESSES:"})}),Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Race:"})}),Object(s.jsx)("h5",{children:a.race})]}),Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Gender:"})}),Object(s.jsx)("h5",{children:a.gender})]}),Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Age:"})}),Object(s.jsx)("h5",{children:a.age})]})]})});case"Input":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"correction-container"})});default:return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"background-container"})})}}()})})}),D={guide:{getUpload:{text:"Hello there! To start, please input an image of a face. Or, read through the background information on the left!",speed:20,eraseDelay:1e7,typingDelay:0,eraseSpeed:30},Uploading:{text:"Loading...this might take a while...",speed:20,eraseDelay:1e3,typingDelay:100,eraseSpeed:30},Uploaded:{text:"Your results are out! Is this what you expected?",speed:20,eraseDelay:1e7,typingDelay:100,eraseSpeed:30},Input:{text:"You got us! Please input the correct information.",speed:20,eraseDelay:1e7,typingDelay:100,eraseSpeed:30}}},k=a(28),P=a.n(k),U=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(P.a,{text:D.guide[e.progress].text,cursor:function(e){return Object(s.jsx)("h1",{style:{color:"#ffffff"},children:e})},speed:D.guide[e.progress].speed,eraseSpeed:D.guide[e.progress].eraseSpeed,eraseDelay:D.guide[e.progress].eraseDelay,typingDelay:D.guide[e.progress].typingDelay,displayTextRenderer:function(e){return Object(s.jsx)("h4",{children:e})}},e.progress)})})},A=(a(87),function(e){var t=Object(r.useState)(void 0),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!0),l=Object(o.a)(i,2),d=l[0],u=l[1],p=function(){var t=Object(b.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("here"),a.preventDefault(),"Yes"===n?e.setProgress("Analysis"):"No"===n&&(e.setProgress("Input"),console.log("here"));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(e){c(e.target.defaultValue),u(!1)};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:function(){switch(e.progress){case"getUpload":case"Uploading":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"guide-bounding",children:Object(s.jsx)(U,{className:"guide",progress:e.progress},e.progress)})});case"Uploaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"guide-bounding",children:Object(s.jsxs)("div",{className:"guide-split",children:[Object(s.jsx)(U,{className:"guide",progress:e.progress},e.progress),Object(s.jsx)("div",{className:"guide-input",children:Object(s.jsxs)("p",{className:"guide-selections",children:[Object(s.jsx)("input",{className:"options yes",type:"radio",name:"q2",value:"Yes",onChange:h}),"Yes",Object(s.jsx)("input",{className:"options no",type:"radio",name:"q2",value:"No",onChange:h}),"No",Object(s.jsx)("button",{className:"guide-submit submit",onClick:p,disabled:d,children:"submit"})]})})]})})});case"Input":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"guide-bounding",children:Object(s.jsx)(U,{className:"guide",progress:e.progress},e.progress)})});default:return Object(s.jsx)(s.Fragment,{})}}()})})}),C=a(29),I=a(32),T=a(6),R=(a(88),20),B=30,E=30,Y=30,G=function(e){Object(C.a)(a,e);var t=Object(I.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).height=200,s.width=300,s.xScale=T.c().range([B,s.width-R]),s.yScale=T.d().domain([100,0]).range([E,s.height-E-Y]),s}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.data,t=(e.map((function(e){return e.val})),e.map((function(e){return e.cat}))),a=this.xScale.domain(t),s=this.yScale,r=this.height,n=this.width,c=this.props.plotTitle,i=this.props.colors;console.log(i);var o=T.e("#".concat(this.props.className)),l=o.append("defs").append("linearGradient").attr("id","".concat(this.props.className,"-bg-gradient")).attr("gradientTransform","rotate(90)");l.append("stop").attr("stop-color",i[0]).attr("offset","0%"),l.append("stop").attr("stop-color",i[1]).attr("offset","100%");var d=T.a(this.xScale),u=T.b(this.yScale);o.append("g").attr("class","accuracy-axis").attr("transform","translate(0, ".concat(this.height-E-Y,")")).call(d).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),o.append("g").attr("class","accuracy-axis").attr("transform","translate(".concat(B,", 0)")).call(u),o.selectAll("bars").data(e).enter().append("rect").attr("x",(function(e){return a(e.cat)+a.bandwidth()/4})).attr("y",(function(e){return s(e.val)})).attr("width",a.bandwidth()/2).attr("height",(function(e){return r-E-Y-s(e.val)})).attr("fill","url(#".concat(this.props.className,"-bg-gradient)")),o.append("g").append("text").attr("x",n/2).attr("y",E).attr("fill","white").text(c).style("text-anchor","middle")}},{key:"render",value:function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("svg",{id:this.props.className,width:this.width,height:this.height})})}}]),a}(n.a.Component),z={background:{1:{header:"What is this?",body:"Whether it is through self-driving cars, phone facial recognition, or security cameras, automated softwares that analyze our faces have become a pervasive element of our everyday lives. The enigmatic nature of machine learning, especially in relation to facial recognition seems simultaneously terrifying and confusing. But it has the potential to be neither! "},2:{header:"Privacy",body:"Rest assured - none of your data will be stored"}}},_={unbiased:{title:"Unbiased Accuracy (%)",data:[{cat:"Race",val:10},{cat:"Gender",val:60},{cat:"Age",val:80}],colors:["#E323FF","#7517F8"]},biased:{title:"Biased Accuracy (%)",data:[{cat:"Race",val:5},{cat:"Gender",val:50},{cat:"Age",val:10}],colors:["#00FFC7","#00A3FF"]}};var q=function(){console.log(_.biased);var e=Object(r.useState)("getUpload"),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(z),i=Object(o.a)(c,2),d=i[0],u=i[1],j=Object(r.useState)(_.unbiased),b=Object(o.a)(j,2),p=b[0],h=b[1],g=Object(r.useState)(_.biased),x=Object(o.a)(g,2),O=x[0],m=x[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("header",{children:Object(s.jsx)(l,{className:"header",progress:a})}),Object(s.jsxs)("div",{className:"main-container",children:[Object(s.jsxs)("div",{className:"text-container",children:[Object(s.jsx)("div",{className:"info-widget box",children:Object(s.jsx)(F,{data:d,progress:a})}),Object(s.jsxs)("div",{className:"stats-container",children:[Object(s.jsx)("div",{className:"stats-widget1 box",children:Object(s.jsx)("div",{className:"graph-box",children:Object(s.jsx)(G,{className:"bar",data:p.data,plotTitle:p.title,colors:p.colors},p.title)})}),Object(s.jsx)("div",{className:"stats-widget2 box",children:Object(s.jsx)("div",{className:"graph-box",children:Object(s.jsx)(G,{className:"bar2",data:O.data,plotTitle:O.title,colors:O.colors},O.title)})})]})]}),Object(s.jsxs)("div",{className:"interactive-container",children:[Object(s.jsx)("div",{className:"guide-container",children:Object(s.jsx)(A,{progress:a,setProgress:n})}),Object(s.jsx)("div",{className:"image-upload-widget box",children:Object(s.jsx)(S,{className:"image-upload",setData:u,setProgress:n,progress:a,data:d,setPlotData1:h,setPlotData2:m})})]})]})]})};i.a.render(Object(s.jsx)(q,{}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.e9dd3e8f.chunk.js.map